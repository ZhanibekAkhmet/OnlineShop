<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="/layout/main.html"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<div layout:fragment="productsContent">
    <div  class="row" id="cardListBody">
    </div>
        <script type="text/javascript">

        loadNotebooks();


        function loadNotebooks() {

            const httpRequest = new XMLHttpRequest();
            httpRequest.open("GET", "/notebook", true);
            httpRequest.onreadystatechange = function () {
                if (httpRequest.readyState == XMLHttpRequest.DONE && httpRequest.status == 200) {

                    let notebookList = JSON.parse(httpRequest.responseText);

                    let cardContent = "";
                    for (let i = 0; i < notebookList.length; i++) {
                        cardContent += "<div class=\"col-sm-4 mt-3\">";
                        cardContent += "<div class=\"card\" style=\"width: 18rem;\">";
                        cardContent += "<h4 class=\"text-center bg-light\">"+ notebookList[i].notebookModel.name +" " + notebookList[i].title + "</h4>";
                        cardContent += "<div>";
                        cardContent += "<p class=\"card-text text-center\">" + notebookList[i].description + "</p>";
                        cardContent += "<h5 class=\"card-title text-center\">" + notebookList[i].price +" тенге" +"</h5>";
                        cardContent += "<a class=\"btn btn-dark\" href=detailsLaptop/"+notebookList[i].id+">" + "Подробнее" +"</a>"
                        cardContent += "<a class=\"btn btn-primary\" href="+notebookList[i].id+"/bucket>" + "В корзину" +"</a>"
                        cardContent += "</div>";
                        cardContent += "</div>";
                        cardContent += "</div>";
                    }
                    document.getElementById("cardListBody").innerHTML = cardContent;
                }
            }
            httpRequest.send();
        }

    </script>

</div>
</html>